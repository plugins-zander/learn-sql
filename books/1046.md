# 第三范式(3NF)

​     定义2.10   设*R*(*U*)是一个关系模式，如果*R*(*U*)∈2*NF*且**每个非主属性都不传递函数依赖于任一候选码**，则称*R*(*U*)属于第三范式，记为*R*(*U*)∈3*NF*。

​          注意，如果一个关系模式的属性全是主属性，那该关系模式肯定属于第三范式，因为该关系模式不存在非主属性。

​    【例2.9】假设有一个关于学生选课信息的关系模式——s_c(学号, 课程号, 名次)，其相关语义是：学号和课程号分别是学生和课程的唯一标识属性，每一名学生选修的每门课程有一个名次，且名次不重复。

Ø 其函数依赖包括：{学号, 课程号} → 名次，{课程号, 名次} → 学号。{学号, 课程号}和{课程号, 名次}是此关系的候选码。其所有的属性都是主属性，此关系模式属于第三范式。

l  第三范式是在第二范式的基础上，增加了条件“每个非主属性都不传递函数依赖于任一候选码”而得到的。

 

 

【例2.10】假设有一个关于员工信息的关系模式：emp_info(Eno, Ename, Dept, Dleader)。其中，Eno为员工编号，Ename为员工姓名，Dept为员工所在部门，Dleader为部门领导。请说明该关系模式属于第几范式以及它存在的问题。

Ø 员工编号是唯一的，每个员工只属于一个部门，每个部门只有一个领导（这里假设领导不属于员工范畴，且不考虑纵向领导关系）。员工编号（Eno）为唯一的码，由此容易推出：   

　　　　　　  Eno → Ename

​                　　Eno → Dept

​                       Eno → Dleader

Ø 显这些函数依赖都是完全函数依赖。这些函数依赖说明了所有非主属性都完全函数依赖于码Eno，所以关系模式emp_info属于第二范式。但该关系模式还存在下列的函数依赖：           

　　　Eno→Dept

​          Dept→Dleader

​          Eno→Dleader

 

l  上述说明非主属性Dleader传递函数依赖于码Eno，即关系模式emp_info中存在传递函数依赖，它不属于第三范式。传递函数依赖的存在同样会导致一定程度的数据冗余以及插入异常和删除异常等问题。这体现在：

Ø 一个部门有多个员工，每一个员工在关系emp_info中都形成一个元组。该元组除了包含员工编号和姓名外，还包含所在部门和部门领导的信息。后两项信息会多次重复出现，重复的次数与部门的员工数相等。这是数据冗余的根源。

Ø 数据冗余的存在导致数据维护成本增加。

Ø 当一个部门刚成立时，如果还没有招员工，那么将无法输入部门和部门领导的信息（主码Eno的输入值不能为null）。这就造成了插入异常。

Ø 出于某些原因，部门的员工可能全部辞职，或者暂时全部转到其他部门去时，需要将所有的员工信息全部删除，这时部门和部门领导的信息也将被删除。这就导致了删除异常。

 

 

l  为消除传递函数依赖，可以使用投影分解法将关系模式分解成相应的若干个模式

​     【例子】根据存在的传递链“Eno→Dept→Dleader”，可以从节点“Dept”上将此传递链切开，形成以下两个模式：

​             emp_info2(Eno, Ename, Dept)

​             dept_info2(Dept, Dleader)

关系模式emp_info2的码为Eno，dept_info2的码为Dept。

l  在消除传递函数依赖后得到的两个关系模式emp_info2和dept_info2都属于第三范式，它们当中都不存在传递函数依赖。

​    【例子】可以在没有员工信息的前提下插入部门信息；可以删除所有的员工信息而不影响部门信息；数据冗余度也有所降低了，从而也简化了其他的一些操作等。

l  属于3*NF*的关系模式主要是消除了非主属性对于候选的传递函数依赖和部分函数依赖，但并没有考虑主属性和候选码之间的依赖关系。它们之间存在的一些依赖关系也会引起数据冗余和操作异常等问题。人们提出了更高一级的范式——*BC*范式。

 

 