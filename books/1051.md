# 需求分析

需求分析是了解用户需求、然后明确用户需求、最后形成需求文字表达（需求分析说明书）的一个过程。需求分析的最终结果就是形成一份有效的需求分析说明书。

## 2.1 系统调研过程

系统调研也称项目调研，即把系统开发当作项目来运作，其主要目的是通过接触用户以了解并最终明确用户的实际需求。这个过程是一个系统分析人员理解和掌握用户业务流程的过程，是一个需要不断与用户进行沟通和磋商的过程。系统调研方法比较灵活，因人、因系统而异。大致过程可以分为以下几个步骤来完成：

 

　　充分了解项目背景以及开发的目的。

　　深入用户单位（指使用该系统的机构和组织）进行调查。包括了解单位的组织结构、运作方式，了解各部门的职责和功能。然后从数据流的角度分析各个部分的特性以及它与其他部门之间的关系，如各部门的输入（输出）数据及其格式是什么，这些数据来自哪里、去向何方等，并作相应的记录。

这个步骤是调查的重点，而且难度比较大，难点在于如何建立与用户理性的沟通渠道。用户与系统分析人员一般都具有不同的技术背景，所以经常导致这种情况的出现：用户认为已经说清楚了的东西而分析人员也许对之还不能理解，或者用户提出的要求过高，超出了计算机能够处理的范围等。当出现这种情况时，需要分析人员不断的询问或说明，久了就会导致用户的厌倦。在进行这项调查前分析人员应该做好充分的准备，例如拟好调查方案、设计合理而简洁的调查表等。

 

给出了一种调查方法，可供读者参考和选用：

单位情况及其运作方式的介绍。

对部门工作职能的深入了解。

召开调查会。

如果与用户还没有就需求达成共识，相关分析人员可有选择地重复②和③步。

 

　　确定用户需求、明确系统功能和边界。综合各个分析人员的调查结果，形成系统的功能说明，确定哪些功能是系统要实现的，哪些是不应该实现的，或者是不能实现的。所有这些结果都应该跟用户确认后予以书面形式确定下来。

 

 

## 2.2 需求分析的方法

### 2.2.1 SA方法

针对数据库设计，形成用户需求的有效表达，这种表达在说明书中多以数据流图、数据字典等形式来描述。

为建立用户需求的表达，可以采用多种分析方法来完成。这些方法主要包括自顶向下和自底向上两种方法，其中常采用的方法是自顶向下的结构化分析方法（SA, structured analysis）。

SA方法的分析过程符合人类对问题的认识并最终解决的一般过程，其分析过程简单、实用，现已在众多领域中得到应用。

SA特点可以归结为一棵树的产生过程：先创建树根，然后创建树根节点的子节点，接着创建各子结点的子节点，直到创建所有的树叶节点为止。在这棵树中，树根节点相当于整个系统（第一层次上的系统），其子节点相当于第二层次上的系统，…，最后层次上的系统由叶子节点表示，它对系统分析人员是可认知的（认为已经清楚而不必再分解了）。自顶向下的SA方法是从整个系统开始，采用逐层分解的方式对系统进行分析的方法。

 

 

### 2.2.2 数据流图（data flow diagram）

SA方法只是对问题分析的一种思想，在具体的分析过程中还需要借助其他的分析工具，这样才能完成对分析过程和结果的记录、对用户需求的表达等，数据流图就是最为常用的辅助分析工具和描述手段。

数据流图是以图形的方式来刻画数据处理系统中信息的转变和传递过程，是对现实世界中实际系统的一种逻辑抽象表示，但又独立于具体的计算机系统。

 

数据流图常采用的符号：

**数据流**

数据流是流动中的数据。所以数据流图是用有方向的曲线或直线来表示，用前头表示数据流的方向，其旁边标以数据流的名称，其格式如下：

 

 ![img](https://img2018.cnblogs.com/blog/1427277/201906/1427277-20190620181818455-1698494355.png)

 

数据流名不是随意取的，它能够简要地概括数据流的含义，且易于理解。下文提到的数据名、加工名、文件名等都有同样的要求。

数据流可以来自数据的源点、加工和数据文件，可以流向数据的终点、加工和数据文件。当数据取自文件或者流向文件时，相应的有向直线或曲线可以不命名，因为从相应的文件中即可知道流动的是什么数据。

 

**数据的源点和终点**

系统中的数据是来自系统以外的其他数据对象，其最终的流向也是系统以外的有关数据对象。

这种向系统提供数据的数据对象统称为系统的数据源点，而系统数据所流向的数据对象则统称为数据终点。这两个概念的引入是为了帮助用户对系统接口界面的理解。

在数据流图中，数据源点和数据终点都是用方框来表示，方框中标以数据的名称。其格式如下：

 ![img](https://img2018.cnblogs.com/blog/1427277/201906/1427277-20190620181845816-1150287933.png)

 

**加工**

加工是对数据处理的一个抽象表示。如果这种“加工”还不为系统分析员所理解，则需要SA方法对其进行分解，直到所得到的加工已经足够简单、不必再分时为止。这时的加工也称为基本加工。在数据流图中，加工是用圆圈（或椭圆）表示，圆圈标以加工的名称。其格式如下：

 ![img](https://img2018.cnblogs.com/blog/1427277/201906/1427277-20190620181901315-249850445.png)

**数据文件**

数据文件是表示数据临时存放的地方，“加工”能够对其进行数据读取或存入。在数据流图中，数据文件通常用平行的双节线表示，旁边标以数据文件名。其格式如下：

![img](https://img2018.cnblogs.com/blog/1427277/201906/1427277-20190620181922790-1162722575.png)

 

　　对于数据流图中的一个节点，可能有几条表示数据流的有向线出自或指向该节点。该节点对数据流的影响方式（流出情况）或这几股数据流对该节点的作用方式是有多种的。这种影响和作用方式说明如表3.1所示。

 ![img](https://img2018.cnblogs.com/blog/1427277/201906/1427277-20190620182012599-379166081.png)

 

### 2.2.3基于数据流图的SA方法

自顶向下的SA分析方法可以与数据流图有机地结合起来，将对系统的分析过程和结果形象地表示出来。

在数据流图中，SA分析方法主要体现在对“加工”进行分解的过程。对数据流图的绘制和分解过程就是用户需求的分析及其表达的形成过程。

一个系统的数据流图是由多个子图构成，如果加上子图之间的分解关系，就可以形成一棵树。但由于所有的子图通过表示分解关系的边连在一起而形成的树将是很庞大的，无法在同一平面中画出，所以在绘制数据流图时要分为多个子图来画。

绘制的原则一般是，先绘制树根节点对应的子图，然后绘制根节点的子节点所对应的子图，一直绘制到所有叶子节点对应的子图为止。

 

 

下面以某中石化集团的样品分析管理系统（一个子系统）的开发为例，介绍数据流图的基本绘制方法。

1）绘制根节点图。从加工粒度上看，根节点图（即根节点对应的数据流图）是最大的数据流图，它是将整个应用系统当作一个加工。

【例子】 对于样品分析管理系统（YPFXMS），其根节点子图如图3.2所示。

 ![img](https://img2018.cnblogs.com/blog/1427277/201906/1427277-20190620182052837-706643623.png)

2）绘制子节点图。数据流图的根节点不提供任何有用的信息，需要对加工“样品分析管理系统”作进一步的分解。在调研中发现，不是每一种样品都需要分析的，能够分析的是那些已经有计算公式或分析方案的样品，而且送样（被送用于分析的样品）要先存在样品分析员那里，样品分析员则按照某一个原则一次对这些送样进行分析。在送样被分析，还需要对分析的结果进行检查，如果发现分析结果不合格（是指分析手段和方法出错）则返回给样品分析员重新进行分析，分析合格则返回给送样人员。于是，分解后得到如图3.3所示的数据流图。

![img](https://img2018.cnblogs.com/blog/1427277/201906/1427277-20190620182152421-1932857166.png)

 

 

 

 

### 2.2.4 形成数据字典

数据流图主要是表示数据和处理之间的关系，但缺乏对数据流、数据文件、加工等图中各个元素进行描述的能力。

数据流图是将用户头脑中的需要转化为机器能够接受的表达的一个中转站，但数据流图表示的信息离机器能够接受的信息还比较远。如果把用户需求和机器表示放在两头，数据流图放在两者之间，那么数据流图更靠近用户需求一些，而相对远离机器表示。

需要引入数据字典的概念，通过数据字典可以加强数据流图的信息表达能力，同时这种表达拉近了与机器表示的距离，使得用户需求从纯粹的逻辑表达逐步转向机器表示，为数据库的实施奠定基础。

与数据流图一样，数据字典也是SA方法中一种有力的工具。数据字典与数据流图结合使用，主要是用于对数据流图中出现的各种元素进行描述，给出所有数据元素的逻辑定义。数据字典是数据流图中数据元素的描述。这种描述是由一系列的条目组成，但不同的应用、不同的系统其组成的条目可能有所不同。至少应该包括数据流、数据文件、加工和数据项等四种条目。

 

数据项条目

​     数据项是数据构成的最小组成单位，它不能再分割。数据项条目用于说明数据项的名称、类型、长度、取值范围等。

​    例如，在课题管理系统中数据项“课题申请代码”条目可描述如下：

数据项名：课题申请代码

类型：字符型

长度：12

取值范围：000000000000～999999999999

取值说明：前4为年号，第5到第6位、第7到第8位分别表示月份和日期，后4位表示     当天的课题序号

 

数据流条目

​    数据流条目主要用于说明数据流的组成（由哪些数据项组成），数据流的来源和流向以及数据流量等信息。

​    例如，数据流“样品分析请求信息”条目描述如下：

数据流名称：样品分析请求信息

组成：申请表编号、申请表名称、分析项目代码、样品编号、

​            样品名称、送样日期、送样人员

来源：记录送样信息（加工）

去向：样品分析请求信息（文件）

流量：10～20/每天

 

数据文件条目

​    数据文件条目用于说明数据文件是由哪些数据项组成，组织方式、存储频率如何等信息。

例如，数据文件“一审合格实验信息”条目如下：

文件名：一审合格实验信息

数据组成：试验记录表编号、试验记录表名称、试验日期、试验环境、试验目的、     操作人员、原料规格、试验配方与工艺、操作过程与现象、

​                                  试验结果与讨论、记录人员、试验组长、课题代码

组织方式：按试验记录表编号递增排列

存储频率：1次/天

 

加工条目

​    加工条目主要用于说明加工的逻辑功能、指明输入数据和输出数据等信息。其中逻辑功能项用于指出该加工用来做什么、对加工处理的一些要求等。

​       例如，

加工编号：1

加 工 名：记录送样信息

输入数据：样品数据

输出数据：样品分析请求信息

逻辑功能：对送检的样品数据进行登记，并由此转化成样品分析请求信息。

 