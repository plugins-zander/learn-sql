# SQL Server

### 字符串型

　　SQL Server 2014中，字符串型数据可以由汉字、英文字母、数字等符号组成。根据编码方式的不同，字符串型又分为Unicode字符串型和非Unicode字符串型。

　　Unicode字符串型数据是指对所有字符均采用双字（16bit）节统一编码的一类数据；

　　非Unicode字符串型数据则是指对不同国家或地区采用不同编码长度的一类数据，例如英文字母使用一个字节（8bit）进行编码，汉字则使用两个字节（16bit）进行编码。

　　SQL Server 2014主要支持的字符串型数据类型如表5.2所示。

![](https://raw.githubusercontent.com/ZanderZhao/images/master/img2019/20191224232500.png)

 

**String 类型：**

| 数据类型       | 描述                                                 | 存储                      |
| -------------- | ---------------------------------------------------- | ------------------------- |
| char(n)        | 固定长度的字符串。最多 8,000 个字符。                | Defined width             |
| varchar(n)     | 可变长度的字符串。最多 8,000 个字符。                | 2 bytes + number of chars |
| varchar(max)   | 可变长度的字符串。最多 1,073,741,824 个字符。        | 2 bytes + number of chars |
| text           | 可变长度的字符串。最多 2GB 文本数据。                | 4 bytes + number of chars |
| nchar          | 固定长度的 Unicode 字符串。最多 4,000 个字符。       | Defined width x 2         |
| nvarchar       | 可变长度的 Unicode 字符串。最多 4,000 个字符。       |                           |
| nvarchar(max)  | 可变长度的 Unicode 字符串。最多 536,870,912 个字符。 |                           |
| ntext          | 可变长度的 Unicode 字符串。最多 2GB 文本数据。       |                           |
| bit            | 允许 0、1 或 NULL                                    |                           |
| binary(n)      | 固定长度的二进制字符串。最多 8,000 字节。            |                           |
| varbinary      | 可变长度的二进制字符串。最多 8,000 字节。            |                           |
| varbinary(max) | 可变长度的二进制字符串。最多 2GB。                   |                           |
| image          | 可变长度的二进制字符串。最多 2GB。                   |                           |



|      | char                                                         | varchar                                                      | nvarchar                                                     |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
|      | char的长度是不可变的                                         | varchar的长度是可变的                                        |                                                              |
|      | char[10] 如果存进去的是‘abcd’,那么char所占的长度依然为10，除了字符‘abcd’外，后面跟六个空格, char类型的要用trim()去掉多余的空格，而varchar是不需要的 | varchar[10]varchar就立马把长度变为4了,10是最大长度， 目前VARCHAR是VARCHAR2的同义词。工业标准的VARCHAR类型可以存储空字符串，但是oracle不这样做，尽管它保留以后这样做的权利。Oracle自己开发了一个数据类型VARCHAR2，这个类型不是一个标准的VARCHAR，它将在数据库中varchar列可以存储空字符串的特性改为存储NULL值。如果你想有向后兼容的能力，Oracle建议使用VARCHAR2而不是VARCHAR。 |                                                              |
|      | char的存取数度还是要比varchar要快得多，因为其长度固定，方便程序的存储与查找；但是char也为此付出的是空间的代价，因为其长度固定，所以难免会有多余的空格占位符占据空间，可谓是以空间换取时间效率， | 而varchar是以空间效率为首位的                                |                                                              |
|      | char的存储方式是，对英文字符（ASCII）占用1个字节，对一个汉字占用两个字节； | 而varchar的存储方式是，对每个英文字符占用2个字节，汉字也占用2个字节，两者的存储数据都非unicode的字符数据。 |                                                              |
|      | VARCHAR2比CHAR节省空间，在效率上比CHAR会稍微差一些，即要想获得效率，就必须牺牲一定的空间，这也就是我们在数据库设计上常说的‘以空间换效率’ | VARCHAR2虽然比CHAR节省空间，但是如果一个VARCHAR2列经常被修改，而且每次被修改的数据的长度不同，这会引起‘行迁移’(Row Migration)现象，而这造成多余的I/O，是数据库设计和调整中要尽力避免的，在这种情况下用CHAR代替VARCHAR2会更好一些。 |                                                              |
|      | **固定长度，实际占用空间为建表时分配的字节大小。一个汉字占用两个字节，一个英文字母占据一个字节。比如char（10），最多存储5个汉字，10个字母。** | **可变长度，实际占用的空间与输入的字符长度有关，一个汉字占据两个字节，英文字母占据一个字节。比如varchar（10），最多存储5个汉字，10个字母** | **可变长度，实际占用空间与输入的字符长度有关，一个汉字占据一个字节，英文字母占据一个字节。比如nvarchar（10），最多存储10个汉字，10个字母。** |

[参考1](https://zhidao.baidu.com/question/56951710.html)    [参考2](https://blog.csdn.net/zoeyen_/article/details/82428339)


 ```
字符型
字符型数据用于存储字符串，字符串中可包括字母、数字和其他特殊符号（如#、@、&等）。在输入字符串时，需将串中的符号用单引号或双引号括起来，如'abc'、"Abc<Cde"。

SQL Server 2008字符型包括两类：固定长度（char）或可变长度（varchar）字符数据类型。

char[(n)]：定长字符数据类型，其中，n定义字符型数据的长度，n在1～8000之间，默认为1。当表中的列定义为char(n)类型时，若实际存储的串长度不足n，则在串的尾部添加空格以达到长度n，所以char(n)的长度为n。例如，某列的数据类型为char(20)，而输入的字符串为"ahjm1922"，则存储的是字符ahjm1922和12个空格。若输入的字符个数超出了n，则超出的部分被截断。

varchar[(n)]：变长字符数据类型，其中，n的规定与定长字符型char中的n完全相同，但这里n表示的是字符串可达到的最大长度。




Unicode字符型

Unicode是统一字符编码标准，用于支持国际上非英语语种的字符数据的存储和处理。SQL Server的Unicode字符型可以存储Unicode标准字符集定义的各种字符。

Unicode字符型包括nchar[(n)]和nvarchar[(n)]两类。nchar是固定长度Unicode数据的数据类型，nvarchar是可变长度Unicode数据的数据类型，二者均使用UNICODE UCS-2字符集。

nchar[(n)]：nchar[(n)]为包含n个字符的固定长度Unicode字符型数据，n的值在1～4 000之间，长度为2n字节。若输入的字符串长度不足n，将以空白字符补足。

nvarchar[(n)]：nvarchar[(n)]为最多包含n个字符的可变长度Unicode字符型数据，n的值在1～4 000之间，默认为1。长度是所输入字符个数的两倍。
 ```

