# 关系模型的数据结构——关系

## 关系定义

+ 令$D = D_1×D_2×…×D_n = {(d_1, d_2,…, d_n) | d_i∈D_n ,  i = 1,2,…,n}$，即*D*为*D*1, *D*2, …, *Dn*的笛卡儿积，则*D*的任何非空子集*R*都称为*D*1, *D*2, …, *Dn*上的*n*元关系，其中*Di*为有限的属性值域，*i* = 1,2,…,*n*。
+ 一个*n*元关系*R*通常记为$R(D_1, D_2, …, D_n)$，*R*中的任一元素$(d_1, d_2,…, d_n)$称为*n*元组，简称元组（Tuple）。元组中的每个值*di*称为分量。*n*称为关系的度或元。当*n* = 1时，*R*称为单元关系；当*n* = 2时，*R*称为二元关系。
+ 注意，一个关系实际上就是若干元组的集合。一个关系必须是有限元组的集合，无限集合对数据库技术来说是无意义的。
+ 笛卡儿积可以用二维表直观地表示。

```
【例子】  假设笛卡儿积D = D1×D2×D3，D1为学号的集合， D1={201301, 201302}，D2为姓名的集合， D2={李思思, 刘洋}，D3为英语成绩（简称“英语”）的集合， D3={90, 85, 70}。
D = {201301, 201302}×{李思思, 刘洋}×{90, 85, 70}
  = { (201301, 李思思, 90), (201301, 李思思, 85), (201301, 李思思, 70),                                 (201301, 刘洋, 90), (201301, 刘洋, 85), (201301, 刘洋, 70),
 　　 (201302, 李思思, 90), (201302, 李思思, 85), (201302, 李思思, 70),
 　　 (201302, 刘洋, 90), (201302, 刘洋, 85), (201302, 刘洋, 70)}。
```

<center>笛卡儿积D的二维表</center>

| 学号（D1） | 姓名（D2） | 英语（D3） |
| ---------- | ---------- | ---------- |
| 201301     | 李思思     | 90         |
| 201301     | 李思思     | 85         |
| 201301     | 李思思     | 70         |
| 201301     | 刘洋       | 90         |
| 201301     | 刘洋       | 85         |
| 201301     | 刘洋       | 70         |
| 201302     | 李思思     | 90         |
| 201302     | 李思思     | 85         |
| 201302     | 李思思     | 70         |
| 201302     | 刘洋       | 90         |
| 201302     | 刘洋       | 85         |
| 201302     | 刘洋       | 70         |

+ 由上面定义，D为一个笛卡儿积，D的任意子集都是三元关系。

```
令R = {(201301, 刘洋, 70), (201302, 李思思, 90)}，R 为D的一个子集，所以R 为3元关系。
这个关系记作R(D1, D2, D3)，其对应二维表示如表所示。
```

<center>3元关系R的一个二维表</center>

| 学号（D1） | 姓名（D2） | 英语（D3） |
| ---------- | ---------- | ---------- |
| 201301     | 刘洋       | 70         |
| 201302     | 李思思     | 90         |

+ 笛卡儿积D本身也是一种关系，但这种关系由于过于泛化而可能会导致语义上的矛盾，从而失去实际意义。一般来说，只有部分关系有意义，而不是全部。

> 【例子】  元组(201301, 刘洋, 90)和元组(201301, 刘洋, 85)就是一对矛盾的元组，因为学号“201301”、姓名为“刘洋”的学生的英语成绩不可能同时取90分和85分这两个值。





##  关系的性质

Ø 列是同质的，即每一列中的分量是同一类型的数据，它们都是来自同一个域。

Ø 每一列为一个属性，不允许存在相同属性名的情况。

Ø 列（行）的顺序是任意的，列（行）的次序可以任意交换。

Ø 不允许存在两个相同的元组。

Ø 每一个分量都是不可再分的，即不允许表中套表。

 

# 关系模式

##  定义

假设一个n元关系R的属性分别为A1, A2, …, An，令R(A1, A2, …, An)表示关系R的描述，称为关系模式。



Ø  关系模式是由属性构成，与属性值无关。为了体现关系模式中的主码，对构成主码的属性添加下划线。

> 【例子】在关系模式R(<u>A, B,<u> C, D, E)中，属性A和B的组合是该关系模式的主码。

Ø  关系模式是描述关系的“型”，即凡是具有相同属性的关系都属于相同的“型”，即它们都属于同一个关系模式。

Ø  一个关系模式可以视为一类具有相同类型的关系集合，属于同一个关系模式的关系都拥有相同的属性（但属性值却不一定相同）。

Ø  一个特定的关系是其对应关系模式的“值”，或者说关系是关系模式这个集合中在某一时刻的一个“元素”。



## 关系和关系模式的区别和联系

•            关系和关系模式之间的联系就好像是数据类型和数据之间的联系。

•            关系模式和关系是有区别的，即前者是后者的抽象，后者是前者的特定实例

•            关系模式是相对稳定的，数据在更新，关系是随时间变化的。但在运用中常常将它们统称为关系，读者可根据上下文来区分。

 

 

 

























